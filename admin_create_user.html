<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel - User Creation</title>
</head>
<body>
    <h2>Create New User</h2>

    <form id="userForm">
        <label>Username:</label><br>
        <input type="text" id="username" required><br><br>

        <label>Password:</label><br>
        <input type="text" id="password" required><br><br>

        <label>Device Mode:</label><br>
        <select id="deviceMode">
            <option value="one_device">One Device</option>
            <option value="unlimited">Unlimited Devices</option>
        </select><br><br>

        <button type="submit">Create User</button>
    </form>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
        // 1️⃣ Firebase config
        const firebaseConfig = {
  apiKey: "AIzaSyCIGS_UC0iwIOr8RLCohDBeqtg9ftcGRng",
  authDomain: "priyangshu-9cffa.firebaseapp.com",
  databaseURL: "https://priyangshu-9cffa-default-rtdb.firebaseio.com",
  projectId: "priyangshu-9cffa",
  storageBucket: "priyangshu-9cffa.firebasestorage.app",
  messagingSenderId: "841620052503",
  appId: "1:841620052503:web:f07c36f895e17418b55a52",
  measurementId: "G-EG10K7D36R"
};

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // 2️⃣ Form submit
        document.getElementById("userForm").addEventListener("submit", function(e) {
            e.preventDefault();

            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("password").value.trim();
            const deviceMode = document.getElementById("deviceMode").value;

            if(username === "" || password === "") {
                alert("Please enter username and password");
                return;
            }

            const userData = {
                password: password,
                status: "active",
                device_mode: deviceMode,  // ← One device or unlimited
                device_id: ""             // ← initially empty
            };

            // Save user in Firebase
            db.ref("userinfo/" + username).set(userData)
                .then(() => alert("User created successfully!"))
                .catch(err => alert("Error: " + err.message));
        });
    </script>
</body>
</html>